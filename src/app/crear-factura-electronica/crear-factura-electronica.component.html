<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nueva Factura</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to right, #f8f9fa, #e9ecef);
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin-top: 30px;
        }
        .card {
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        .btn-custom {
            border-radius: 8px;
            transition: 0.3s;
        }
        .btn-custom:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
  
  <div class="factura-container">
  <!-- Contador de facturas usadas -->
  <div class="contador-facturas">
    <p>{{ contadorFacturas }}</p>
  </div>

  <!-- Header con recomendación de la DIAN -->
  <div class="header">
    <h2>Nueva factura de venta / Ingresos</h2>
    <p>Por recomendación de la DIAN, deberías configurar un tipo de factura electrónica como <strong>Tipo 03 (Contingencia)</strong> para que puedas expedir facturas de talonario o de papel en caso de inconvenientes tecnológicos con el sistema de facturación electrónica. (Art. 31 Res. 42 de 2020).</p>
    <a href="#">Aprende más y cómo configurarla.</a>
  </div>

  <!-- Sección de selección de tipo de factura -->
  <div class="seccion">
    <mat-form-field appearance="outline">
      <mat-label>Tipo de facturación</mat-label>
      <mat-select [(ngModel)]="tipoFacturacion" name="tipoFacturacion">
        <mat-option value="xml">XML</mat-option>
        <mat-option value="cufe">CUFE</mat-option>
        <mat-option value="qr">QR</mat-option>
        <mat-option value="firma">Firma</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Sección de búsqueda de cliente -->
  <div class="seccion">
    <mat-form-field appearance="outline">
      <mat-label>Buscar cliente por nombre, NIT o cédula</mat-label>
      <input matInput type="text" placeholder="Ingrese un dato">
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="mostrarFormulario()" *ngIf="!clienteSeleccionado && !mostrarFormularioCreacion">
      Crear nuevo cliente
    </button>
  </div>

  <!-- Mostrar datos del cliente seleccionado -->
  <div *ngIf="clienteSeleccionado && !mostrarFormularioCreacion" class="seccion">
    <h3>Cliente seleccionado:</h3>
    <p>Empresa: {{ clienteSeleccionado.empresa }}</p>
    <p>NIT: {{ clienteSeleccionado.nit }}</p>
    <p>Cédula: {{ clienteSeleccionado.cedula }}</p>
    <p>Plan: {{ clienteSeleccionado.plan }}</p>
    <p>Estado: {{ clienteSeleccionado.estado }}</p>
  </div>

  <!-- Formulario de creación de cliente -->
  <div *ngIf="mostrarFormularioCreacion" class="seccion">
    <h3>Crear nuevo cliente</h3>
    <form (ngSubmit)="crearCliente()">
      <mat-form-field appearance="outline">
        <mat-label>Empresa</mat-label>
        <input matInput [(ngModel)]="nuevoCliente.empresa" name="empresa" required />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>NIT</mat-label>
        <input matInput [(ngModel)]="nuevoCliente.nit" name="nit" required />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Cédula</mat-label>
        <input matInput [(ngModel)]="nuevoCliente.cedula" name="cedula" required />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Plan</mat-label>
        <mat-select [(ngModel)]="nuevoCliente.plan" name="plan" required>
          <mat-option value="gratuito">Gratuito</mat-option>
          <mat-option value="basico">Básico</mat-option>
          <mat-option value="plus">Plus</mat-option>
          <mat-option value="pro">Pro</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Estado</mat-label>
        <mat-select [(ngModel)]="nuevoCliente.estado" name="estado" required>
          <mat-option value="activo">Activo</mat-option>
          <mat-option value="inactivo">Inactivo</mat-option>
        </mat-select>
      </mat-form-field>

      <button mat-raised-button color="primary" type="submit">Crear cliente</button>
    </form>
  </div>

  <!-- Sección de tipo de facturación -->
  <div *ngIf="tipoFacturacion === 'xml'" class="seccion">
    <h3>Facturación XML</h3>
    <!-- Contenido para XML -->
  </div>

  <div *ngIf="tipoFacturacion === 'cufe'" class="seccion">
    <h3>Facturación CUFE</h3>
    <!-- Contenido para CUFE -->
  </div>

  <div *ngIf="tipoFacturacion === 'qr'" class="seccion">
    <h3>Facturación QR</h3>
    <!-- Contenido para QR -->
  </div>

  <div *ngIf="tipoFacturacion === 'firma'" class="seccion">
    <h3>Facturación Firma</h3>
    <!-- Contenido para Firma -->
  </div>

  <!-- Sección de contacto y fecha de elaboración -->
  <div class="seccion">
    <h3>Información adicional</h3>
    <mat-form-field appearance="outline">
      <mat-label>Correo electrónico</mat-label>
      <input matInput [(ngModel)]="correoElectronico" name="correo" type="email" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Número de teléfono</mat-label>
      <input type="number" id="telefono" class="form-control" placeholder="Número de teléfono" min="0"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')">

    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Fecha de elaboración</mat-label>
      <input matInput [(ngModel)]="fechaElaboracion" [matDatepicker]="picker" name="fechaElaboracion" />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </div>

  <!-- Botones de acción -->
  <div class="botones">
    <button class="cancelar" (click)="cancelar()">Cancelar</button>
    <button class="guardar" (click)="guardar()">Guardar</button>
    <button class="guardar-enviar" (click)="guardarYEnviar()">Guardar y Enviar</button>
  </div>
</div>